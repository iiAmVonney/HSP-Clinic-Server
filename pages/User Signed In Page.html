<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="IIE MSA CAMPUS CLINIC">
    <link rel="stylesheet" href="./css/style.css">
	<!-- Toastr CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
	
		<title>IIE MSA CAMPUS CLINIC | User Signed In Page</title>
	</head>
	<body>
		<header>
			<div class="container">

				<nav class="navbar">
					<div class="branding">
						<img href="/" src="./img/HSP Logo.png" class="HSP-logo">
					</div>
					<label for="input-hamburger" class="hamburger "></label>
					<input type="checkbox" id="input-hamburger" hidden>
					<ul class="menu">
						<li><a href="/" class="menu-link">Home</a></li>
						<li class="has-dropdown">
							<a href="#" class="menu-link">Profile
								<span class="arrow"></span>
							</a>
							<ul class="submenu">
								<li><a href="/User" class="menu-link">Edit Profile</a></li>
								<li><a href="/Bookings" class="menu-link">Appointment</a></li>
								<li><a href="http://localhost:3000/SignOut" class="menu-link" formaction="http://localhost:3000/SignOut">Sign Out</a></li>
							</ul>
						</li>
						<li><a href="/Contact" class="menu-link">Contact</a></li>
					</ul>
				</nav>

				<div class="Edit User Details Form">

					<div class = Information style="text-align: center">						
						<br><br><br><br>
							<h3>Edit User Details</h3>
							<br>


							<form id="UserDetails" method="POST" action="http://localhost:3000/User">
							<div class="Signed-In-Container">

								<input name="userId" id="inputId" type="text"  hidden/>

								<section class="Signed-In-Section-1">
								<label><b>Student Number : </b></label><br>
								<input id="inputStudentNumber" type="text" title="SignedInStudentNumber" placeholder="ST10101234" readonly/><br><br>
							</section>

							<section class="Signed-In-Section-2">
								<label><b>First Name : </b></label><br>
								<input name="first_name" id="inputFirstName" type="text" title="SignedInFirstName" /><br><br>
							</section>

							<section class="Signed-In-Section-3">
								<label><b>Last Name : </b></label><br>
								<input name="last_name" id="inputLastName" type="text" title="SignedInLastName" placeholder="Smith" /><br><br>
							</section>

							<section class="Signed-In-Section-4">
								<label><b>Address : </b></label><br>
								<input name="address" id="inputAddress" type="text" title="SignedInAddress" placeholder="144 Peter Road" /><br><br>
							</section>

							<section class="Signed-In-Section-5">
								<label><b>Telephone Number : </b></label><br>
								<input name="phone_number" id="inputPhoneNumber" type="text" title="SignedInStudentCellNumber" placeholder="0721234567" /><br><br>
							</section>

							<section class="Signed-In-Section-6">
								<label><b>Gender : </b></label><br>


								<div class="radiogroup">
									<input name="gender" class="radiogroup-input" type="radio" value="M" name="gender" id="Option1">
									  <label class="radiogroup-label" for="Option1" style="text-align:center">Male</label>
									  <input class="radiogroup-input" type="radio" value="F" name="gender" id="Option2">
									  <label class="radiogroup-label" for="Option2" style="text-align:center">Female</label>
								</div>


							</section>

							<section class="Signed-In-Section-7">
								<label><b>Date of Birth : </b></label><br>
								<input name="DOB" id="inputDOB" class="birthdate" type="date" title="SignedInDateOfBirth" placeholder="YYYY-MM-DD" data-date-split-input="true" /><br><br>
							</section>

							<section class="Signed-In-Section-8">
								<label><b>Allergies : </b></label><br>
								<input name="allergy" id="inputAllergies" type="text" title="SignedInAllergies" placeholder="Pollen Allergy"/><br><br>
							</section>

							<section class="Signed-In-Section-9">
								<label><b>E-mail Address : </b></label><br>
								<input name="email" id="InputEmail" type="text" title="SignedInEmail" placeholder="ST10101234@imconnect.edu.za" /><br><br>
							</section>

							<section class="Signed-In-Section-10">
								<label><b>Password : </b></label><br>

								<input name="password" type="password" id="password" title="SignedInPassword" placeholder="********" oninput="ValidatePasswords()"/><br><br>

								<input type="checkbox" onclick="ShowPassword()">Show Password<br><br>
							</section>

							<section class="Signed-In-Section-11">
								<label><b>Confirm Password : </b></label><br>
								<input type="password" id="passwordconfirm" title="SignedInConfirmPassword" oninput="ValidatePasswords()"/><br><br>
								<input type="checkbox" onclick="ShowPasswordConfirm()">Show Password<br><br>
							</section>

							<section class="Signed-In-Section-12">
    						<button type="submit" id="SubmitButton" class="UserSignedInSubmitbtn" disabled>Confirm</button><br><br><br><br>
							</section>

						</div>
							</form>
					</div>

				</div>


			</div>
		</header>





	</body>


	<!-- JQuery -->
	<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
		<!-- Toastr JS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
	
	<script>


		
document.addEventListener("DOMContentLoaded", function(){
    
    // document.getElementById("LogIn")
    // .addEventListener("submit", handleSignIn);

    // document.getElementById("LogIn")
    // .addEventListener("submit", handleSignIn);

	

    var cookies = document.cookie.split('; ');

    toastr.options = {
        "closeButton": true,
        "debug": false,
        "newestOnTop": false,
        "progressBar": true,
        "preventDuplicates": false,
        "onclick": null,
        "showDuration": "100",
        "hideDuration": "1000",
        "timeOut": "5000",
        "extendedTimeOut": "1000",
        "showEasing": "swing",
        "hideEasing": "linear",
        "showMethod": "show",
        "hideMethod": "hide"
    };

    
    cookies.forEach(cookie => {
        let pairs = cookie.split('=');
        
        if(pairs[0]=='user-name'){
            
			
                
        }

		switch (pairs[0]) {
			case 'user-name':

				document.getElementById("inputFirstName").value = pairs[1].replaceAll('%20',' ');

				toastr.success('Welcome back, '+pairs[1]+'!');	

			break;

			case 'last_name':

				document.getElementById("inputLastName").value = pairs[1].replaceAll('%20',' ');
				
			break;

			case 'address':

				document.getElementById("inputAddress").value = pairs[1].replaceAll('%20',' ');
				
			break;

			case 'phone_number':

				document.getElementById("inputPhoneNumber").value = pairs[1].replaceAll('%20',' ');
				
			break;

			case 'gender':

				if(pairs[1].replace('%20',' ')=="M"){
					document.getElementById("Option1").checked = true;

				}else{
					document.getElementById("Option2").checked = true;
				}
	
			break;

			case 'DOB':

				document.getElementById("inputDOB").value = pairs[1].replaceAll('%3A',':').substring(0,10);
				
			break;

			case 'allergies':

				document.getElementById("inputAllergies").value = pairs[1].replaceAll('%20',':');
				
			break;

			case 'email':

				document.getElementById("inputEmail").value = pairs[1].replaceAll('%20',':');
				
			break;

			case 'student_number':

				document.getElementById("inputStudentNumber").placeholder = pairs[1].replaceAll('%20',':');
				
			break;

			case 'userId':

				document.getElementById("inputId").value = pairs[1].replaceAll('%20',':');
				
			break;


			default:
				break;
		}

    });

	

		

});


	  var listmenu = document.getElementById("ListMenu");
	  listmenu.style.maxHeight="0px";
	  function dropdownmenu(){
	    if(listmenu.style.maxHeight=="0px")
	    {
	      listmenu.style.maxHeight="130px";
	    }
	    else
	    {
	      listmenu.style.maxHeight="0px";
	    }
	  }

		function ShowPassword() {
  var x = document.getElementById("password");
  if (x.type === "password") {
    x.type = "text";
  } else {
    x.type = "password";
  }
}

function ShowPasswordConfirm() {
var x = document.getElementById("passwordconfirm");
if (x.type === "password") {
x.type = "text";
} else {
x.type = "password";
}
}

function confirmSignOut() 
{
         let confirmSignOut = confirm("User being Signed Out");
         if (confirmSignOut) {
					 /*Action For CONFRIMING SIGN OUT back to HOME PAGE*/

					 document.cookie = "token=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"
					 fetch("localhost:3000/");
			
			console.log('signed out');

         } else {
					 /*Action For CANCELLING SIGN OUT*/
         }
       }
	   function ValidatePasswords()
{
	var x = document.getElementById("password").value;
	var y = document.getElementById("passwordconfirm").value;
	// If Not same return False.
  if (x != y)
	{
		document.getElementById("SubmitButton").disabled = true;
  }else{
		document.getElementById("SubmitButton").disabled = false;
	}
}


	</script>


  <footer>
		<p>HSP GROUP, Copyright &copy; 2022</p>
	</footer>

</html>
